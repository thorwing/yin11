(function(c){var m=!1,d=!m,a,o=m,g,h=".pageless",k="scroll"+h,e="resize"+h,q={container:window,currentPage:1,distance:100,pagination:".pagination",params:{},url:location.href,loaderImage:"/images/load.gif"},i,n;c.pageless=function(t){c.isFunction(t)?q.call():p(t)};var f=function(){return q.loaderHtml||'<div id="pageless-loader" style="display:none;text-align:center;width:100%;">  <div class="msg" style="color:#e9e9e9;font-size:2em"></div>  <img src="'+q.loaderImage+'" alt="loading more results" style="margin:10px auto" /></div>'};var p=function(t){if(q.inited){return}q.inited=d;if(t){c.extend(q,t)}i=q.container;n=c(i);if(q.pagination){c(q.pagination).remove()}l()};c.fn.pageless=function(v){var u=c(this),t=c(v.loader,u);p(v);a=u;if(v.loader&&t.length){g=t}else{g=c(f());u.append(g);if(!v.loaderHtml){c("#pageless-loader .msg").html(v.loaderMsg)}}};var b=function(t){(o=t)?(g&&g.fadeIn("normal")):(g&&g.fadeOut("normal"))};var s=function(){return(i===window)?c(document).height()-n.scrollTop()-n.height():n[0].scrollHeight-n.scrollTop()-n.height()};var r=function(){n.unbind(h)};var l=function(){n.bind(k+" "+e,j).trigger(k)};var j=function(){if(q.totalPages<=q.currentPage){r();if(q.end){q.end.call()}return}if(!o&&(s()<q.distance)){b(d);q.currentPage++;c.extend(q.params,{page:q.currentPage});c.get(q.url,q.params,function(t){c.isFunction(q.scrape)?q.scrape(t):t;g?g.before(t):a.append(t);b(m);if(q.complete){q.complete.call()}})}}})(jQuery);