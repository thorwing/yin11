<div class="masonary_item">
    <div class="inner_frame">
        <% if item.is_a?(Image) %>
            <%= image_tag(item.picture_url(:waterfall), height: item.waterfall_height) %>
        <% else %>
            <% pic_url = item.get_image_url(:waterfall) %>
            <% if pic_url.present? %>
                <%= link_to image_tag(pic_url, height: item.get_image_height(:waterfall)), item %>
            <% end %>
            <div class="ml10 mr10 clearfix">
                <% if (item.respond_to? :name) %>
                    <%= content_tag :span, t("object_types.#{item.class.name.downcase}"), class: "icon icon_#{item.class.name.downcase}" %>
                    <span class = "f16"><%= link_to item.name, item %></span><br/>
                <% end %>
            </div>
            <div class="clearfix">
                <% if (item.respond_to? :author) && item.author %>
                    <span>
                        <%= link_to image_tag(item.author.get_avatar(:thumb, false), width: 22, height: 22), item.author %>
                        <%= link_to item.author.login_name, item.author %>
                    </span>
                <% end %>
                <% if (item.respond_to? :content) %>
                    <p>
                        <%= item.content %> <span class="display_inline_block"><%= link_to t("general.details"), item %></span>
                    </p>
                <% end %>
            </div>
        <% end %>
    </div>
</div>
