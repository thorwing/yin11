<div id="desire_fields">
    <%= form_for @desire do |f| %>
        <%= render "shared/error_messages", target: @desire %>

        <div class="grid_7">
            <div id="upload_area" class="b_white"  >
                <%= hidden_field_tag "authenticity_token", form_authenticity_token, :id => "tokentag" %>
                <div id="images_container"align="center">
                  <div class="uploaded_image"><%= image_tag params[:img] %></div>
                </div>
                <%= hidden_field_tag "remote_image_url", params[:img] %>
            </div>

            <span class="trivial"><%= "添点描述，让它变得更诱人吧：" %></span><br/>
            <%= f.text_area :content, :maxlength => get_max_length(@desire, :content), 'data-comment_max_len' => get_max_length(@desire, :content), :class => "char_aware" %>
            <%= content_tag :span, "", class: "char_saver display_none" %>
            <%= content_tag :span, "", class: "char_counter block trivial" %>

            <% if current_user_has_permission? :editor %>
                <%= render "shared/text_field", :f => f, :label => t("general.priority"), :field => :priority %>
            <% end %>

            <div class= "mt10"><%= f.submit (f.object.new_record? ? t("general.publish") : t("general.change")), class: "button", id: "submit_desire" %> </div>
        </div>

        <div class="fl display_inline" style="width:400px;">
            <div class="field">
                 <%= f.label :tags_string, t("tags.tags") %>
                 <%= f.text_field :tags_string, 'data-pre' => (f.object.tags ? f.object.tags.map { |t| { :id => t, :name => t }} : []).to_json, class: "tags_input" %>
            </div>
            <%= render "tags/tags_options" %>
        </div>

        <div class="clearfix"></div>
    <% end %>
</div>