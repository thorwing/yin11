<%= stylesheet_link_tag "upload" %>

<%= form_for desire, :html => { :multipart => true }, :remote => true do |f| %>
    <div class="p5 clearfix" id = "desire_fields" >
        <h2><%= "馋人的" %></h2>
        <%= f.text_area :content, :maxlength => get_max_length(desire, :content), 'data-comment_max_len' => get_max_length(desire, :content), :class => "char_aware", rows: 8 %>
        <%= content_tag :span, "", class: "char_saver display_none" %>
        <%= content_tag :span, "", class: "char_counter block trivial" %>
        <div>
            <span class="fl mr5">添加：</span>
            <!--image uploader-->
            <div class = "fl">
                <%= hidden_field_tag "authenticity_token", form_authenticity_token, :id => "tokentag" %>
                <div id="uploader" class="fl mr10"></div>
                <div id="upload_spinner" style="display:none" ><%= image_tag "loading_big.gif", width: 24, height: 24 %></div>
            </div>

            <div class= "fr m5"><%= f.submit t("general.submit"), class: "button" %> </div>
       </div>
       <div id="images_container" class="block fl m5" >
       </div>
        <div class="clearfix"></div>
        <div class="field">
             <b><%= f.label :tags_string, t("tags.tags") %></b>
             <%= f.text_field :tags_string, 'data-pre' => (f.object.tags ? f.object.tags.map { |t| { :id => t, :name => t }} : []).to_json, class: "tags_input" %>
        </div>
        <%= render "tags/tags_options" %>
    </div>
<% end %>