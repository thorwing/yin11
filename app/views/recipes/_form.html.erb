<%= form_for(@recipe) do |f| %>
 <%= render "shared/error_messages", target: @recipe %>

   <div class = "grid_9  to_left ">
       <div class="field block box_shadow m10 p5">
            <%= f.label :title, t("recipes.basic_info") , :class => "f16" %><br/><br/>
            <%= f.label :title, t("recipes.name") , :class => "f14" %>
            <%= f.text_field :name, :maxlength => get_max_length(Recipe, :name) %>
            <div class="field f14">
                 <%= f.label :tags_string, t("tags.tags") %>
                 <%= f.text_field :tags_string, 'data-pre' => (f.object.tags ? f.object.tags.map { |t| { :id => t, :name => t }} : []).to_json %>
            </div>
       </div>

       <div class="box_shadow m10 p5">
            <div class ="ingredients ">
                <%= f.label :title, t("recipes.ingredients") , :class => "f16" %><br/>
                <table>
                    <tr>
                        <th><%= t("recipes.ingredient_name") %></th>
                        <th><%= t("recipes.ingredient_amount") %></th>
                        <th><%= t("recipes.is_major_ingredient") %></th>
                        <th></th>
                    </tr>

                    <%= f.fields_for :ingredients  do |builder| %>
                        <%= render "ingredient_fields", :f => builder %>
                    <% end  %>
                </table>
            </div>
            <%= link_to_add_fields( t("recipes.add_ingredient"), f, :ingredients, ".ingredients table" , get_max_length(Recipe, :ingredients))  %>
        </div>

        <div class="box_shadow m10 p5">
            <div class ="steps block ">
                <%= f.label :title, t("recipes.steps"), :class => "f16" %><br/>
                <%= f.fields_for :steps  do |builder| %>
                    <%= render "step_fields", :f => builder %>
                <% end %>
            </div>
            <%= link_to_add_fields( t("recipes.add_step"), f, :steps, ".steps", get_max_length(Recipe, :steps) ) %><br/>


            <%= f.label :title, t("recipes.note"), :class => "f14" %>
        </div>

      <div class="mt20">
        <%= f.submit t("general.submit"), class: "button" %>
      </div>
  </div>

  <!--<div class = "grid_3 box_shadow to_right m10 p5">-->
    <!--<h3><= t("recipes.tips") %></h3>-->
    <!--<= t("recipes.how_to") %>-->
  <!--</div>-->

<% end %>
