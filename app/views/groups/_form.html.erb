<%= form_for @group do |f| %>
    <%= render "shared/error_messages", :target => @group %>

    <div class="field">
        <%= f.label :name, t("general.name") %><%= mark_required(@group, :name) %><%= mark_required_length(@group, :name) %><br/>
        <%= f.text_field :name, :maxlength => 20 %>
    </div>
    <div class="field">
        <%= f.label :description, t("general.description") %><%= mark_required(@group, :description) %><%= mark_required_length(@group, :description) %><br/>
        <%= f.text_area :description, :maxlength => 200 %>
    </div>
    <div class="field">
         <%= f.label :tags_string, t("info_items.tags") %><br/>
         <%= f.text_field :tags_string, 'data-pre' => (@group.tags ? @group.tags.map { |t| { :id => t, :name => t }} : []).to_json %>
    </div>
    <div class="map_address">
        <div class="field">
            <%= content_tag(:span, current_city.name, :id => "current_city_name") %>(<%= link_to t("address.change_city"), locations_edit_current_city_path(:popup => true), :rel => "facebox" %>)<br/>
        </div>
        <%= f.fields_for :address do |builder| %>
            <div class="field">
                <%= builder.select :district_id, options_for_select(current_city.districts.map { |d| [d.name, d.id]}, @vendor.address.district_id) %>
            </div>
            <%= builder.hidden_field :point, {:class => "map_point"} %>
            <div class="field">
                <b><%= t("address.detail") %></b><br/>
                <%= builder.text_field :detail, {:class => "map_detail"} %>
            </div>
            <div class="field">
                <b><%= t("address.near") %></b><br/>
                <%= builder.text_field :near %>
            </div>
            <%= render "shared/map_indicator" %>
            <div id="map_container"></div>
        <% end %>
    </div>
    <div class="actions">
        <%= f.submit t("general.submit"), :class => "button" %>
    </div>
<% end %>
