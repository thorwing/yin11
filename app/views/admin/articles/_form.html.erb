<%= form_for [:admin, @article], :html => { :multipart => true } do |f| %>
    <%= render "shared/error_messages", :target => @article %>

    <div class="field">
        <%= f.label :title, t("general.title") %><%= mark_required(Article, :title) %><%= mark_required_length(Article, :title) %><br/>
        <%= f.text_field :title, :maxlength => get_max_length(Article, :title) %>
    </div>
    <div class="field">
         <%= f.label :tags_string, t("info_items.tags") %><br/>
         <%= f.text_field :tags_string, 'data-pre' => (@article.tags ? @article.tags.map { |t| { :id => t, :name => t }} : []).to_json %>
    </div>
    <div class="field">
        <%= f.label :reported_on_string, t("general.date") %><br/>
        <%= f.text_field :reported_on_string, {:class => "date_picker"} %>
    </div>
    <div class="field">
        <%= f.label :region_tokens, t("articles.involved_regions") %><br/>
        <%= f.text_field :region_tokens, 'data-pre' => (@article.region_ids ? @article.region_ids.map { |e| { :id => e, :name => get_region(e).name }} : []).to_json %>
    </div>
    <p><label><%= t("articles.source") %></label></p>
    <div class="fields_group">
        <%= f.fields_for :source do |builder| %>
            <div class="field">
                <%= builder.label :name, t("articles.source_name") %><%= mark_required(builder.object, :name) %><%= mark_required_length(builder.object, :name) %><br/>
                <%= builder.text_field :name, :maxlength => get_max_length(builder.object, :name) %>
            </div>
            <div class="field">
                <%= builder.label :site, t("articles.source_site") %><%= mark_required(builder.object, :site) %><%= mark_required_length(builder.object, :site) %><br/>
                <%= builder.text_field :site, :maxlength => get_max_length(builder.object, :site) %>
            </div>
            <div class="field">
                <%= builder.label :url, t("general.content") %><br/>
                <%= builder.text_field :url%>
            </div>
        <% end %>
    </div>

     <div class="field">
        <%= f.label :type, t("general.type") %><br/>
        <%= f.select :type, options_for_select(ArticleTypes.get_values, @article.type) %>
    </div>

    <%= render "images/images_fields", :f => f, :item => @article %>

    <div class="field">
        <%= f.label :content, t("general.content") %><%= mark_required(@article, :content) %><%= mark_required_length(@article, :content) %><br/>
        <%= f.text_area :content, :class => "mceEditor", :maxlength => get_max_length(Article, :site) %>
    </div>

    <div class="field">
        <%= f.label :recommended, t("general.recommended") %><br />
        <%= f.check_box :recommended, {}, true, false %>
    </div>

    <div class="field">
        <%= f.label :disabled, t("general.disable") %><br />
        <%= f.check_box :disabled, {}, true, false %>
    </div>

    <div class="actions">
        <%= f.submit t("general.submit"), :class => "button" %>
    </div>

<% end %>

<%= render "info_items/delay_load_stuff", :item => @article %>
